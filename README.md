# ModifyWeapons 修改武器插件

- 作者: 羽学
- 出处: Tshock官方QQ群816771079
- 这是一个Tshock服务器插件，主要用于：修改储存玩家武器数据并自动重读,可使用/mw指令给予玩家指定属性的物品

## 更新日志

```
v1.1.0
加入了修改配置内的数据使用/reload也能同步到数据库中
如果误删了配置里的数据表,可以重启服务器它会从数据库写回配置文件里

加入了组合属性修改逻辑:
/mw set d 100 ss 20
/mw g 玩家名 物品名 d 100 ss 20

加入了重读冷却机制与重读次数(免疫权限为:mw.cd)
第一次进服默认都有2次重读次数，而进服重读默认为关闭
当冷却达到Config预设的秒数时，自动加1次重读次数
根据重读次数可直接使用/mw read 手动重读武器数值
如果没有达到冷却或没有重读次数可截图自己的/mw菜单页面给管理
让管理在后台使用指令也可以帮玩家手动重读:
/mw g 玩家名字 武器名 数值…
（这个指令也会主动开启玩家进服重读功能）

修复了/mw del 不会删配置文件的BUG
修复了/mw open 不会同步配置文件的BUG
修复了重铸后再重读武器会吞武器前缀的BUG,
/mw g 会判断玩家是否手持自定义武器来获取准确前缀
（使用前建议让玩家先选中自定义武器，再让管理员用/mw g）


v1.0.0
羽学版自定义武器含数据库
参考/mw指令菜单最下面一行的数值状态来修改
修改自己的手持物品：/mw s 200 1 4 20 12 938 10
修改并给予指定玩家的物品：/mw g 羽学 铜短剑 200 1 4 20 12 938 10
关于弹幕类武器：
有时候降低速度,反而弹幕频率会更密集
```

## 指令

| 语法                             | 别名  |       权限       |                   说明                   |
| -------------------------------- | :---: | :--------------: | :--------------------------------------: |
| /mw  | 无 |   mw.use    |    指令    |
| /mw on | 无 |   mw.use    |    开启或关闭自己进服重读    |
| /mw read | 无 |   mw.use    |    手动重读自己武器数值    |
| /mw s d 200 ut 20 | /mw set |   mw.admin    |    修改自己手持物品属性    |
| /mw g 玩家名 物品名 伤害 大小 击退 用速 攻速 弹幕 弹速 | /mw give |   mw.admin    |    给予指定玩家修改数值物品格式1    |
| /mw g 玩家名 物品名 d 200 ut 20 | /mw give |   mw.admin    |    给予指定玩家修改数值物品格式2    |
| /mw open 玩家名 | 无 |   mw.admin    |    修改别人进服重读功能    |
| /mw del 玩家名 | 无 |   mw.admin    |    删除指定玩家数据    |
| /mw reads | 无 |   mw.admin    |    统一修改所有人的进服重读状态    |
| /mw reset | 无 |   mw.admin    |    重置所有玩家数据    |
| /reload  | 无 |   tshock.cfg.reload    |    重载配置文件    |
| 无  | 无 |   mw.cd    |    忽略冷却时间与次数的重读武器权限    |

## 配置
> 配置文件位置：tshock/修改武器.json
```json
{
  "插件开关": true,
  "初始重读次数": 2,
  "增加重读次数的冷却时间": 180.0,
  "数据表": [
    {
      "玩家名字": "羽学",
      "进服重读": true,
      "物品ID": 2624,
      "前缀": 82,
      "伤害": 200,
      "大小": 1.0,
      "击退": 2.0,
      "用速": 1,
      "攻速": 30,
      "弹幕": 1,
      "弹速": 10.0,
      "读取时间": "2024-11-28T06:28:08.2528562",
      "读取次数": 1
    },
    {
      "玩家名字": "安安",
      "进服重读": true,
      "物品ID": 3507,
      "前缀": 14,
      "伤害": 500,
      "大小": 1.0,
      "击退": 4.0,
      "用速": 1,
      "攻速": 30,
      "弹幕": 938,
      "弹速": 2.1,
      "读取时间": "2024-11-28T07:09:32.7053442",
      "读取次数": 0
    }
  ]
}
```
## 反馈
- 优先发issued -> 共同维护的插件库：https://github.com/UnrealMultiple/TShockPlugin
- 次优先：TShock官方群：816771079
- 大概率看不到但是也可以：国内社区trhub.cn ，bbstr.net , tr.monika.love